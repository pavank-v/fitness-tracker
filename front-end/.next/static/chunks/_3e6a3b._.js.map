{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/pavan-kumar/pavan/dummy/front-end/lib/constant.ts"],"sourcesContent":["export const ACCESS_TOKEN: string = 'access';\nexport const REFRESH_TOKEN: string = 'refresh';"],"names":[],"mappings":";;;;AAAO,MAAM,eAAuB;AAC7B,MAAM,gBAAwB"}},
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///home/pavan-kumar/pavan/dummy/front-end/lib/api.ts"],"sourcesContent":["import axios, { AxiosError, AxiosInstance, AxiosRequestConfig, AxiosResponse, InternalAxiosRequestConfig } from \"axios\";\nimport { ACCESS_TOKEN, REFRESH_TOKEN } from \"../lib/constant\";\n\nconst api: AxiosInstance = axios.create({\n  baseURL: process.env.url as string,\n});\n\napi.interceptors.request.use(\n  (config: InternalAxiosRequestConfig) => {\n    const token: string | null = localStorage.getItem(ACCESS_TOKEN);\n\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    return config;\n  },\n  (error) => {\n    Promise.reject(error);\n  }\n);\n\napi.interceptors.response.use(\n  (response: AxiosResponse) => response,\n  async (error: AxiosError) => {\n    const originalRequest = error.config as AxiosRequestConfig & { _retry?: boolean };\n\n    if (error.response?.status == 401 && !originalRequest._retry) {\n      originalRequest._retry = true;\n\n      const refreshToken: string | null = localStorage.getItem(REFRESH_TOKEN);\n      if (refreshToken) {\n        try {\n          const res = await axios.post(\n            `${process.env.url}/auth/token/refresh`, { refresh: refreshToken },\n          )\n          if (res.status === 200) {\n            const newAccessToken = res.data.access;\n            localStorage.setItem(ACCESS_TOKEN, newAccessToken)\n\n            if (originalRequest.headers) {\n              originalRequest.headers.Authorization = `Bearer ${newAccessToken}`;\n            }\n            return api(originalRequest)\n          }\n        }\n        catch (refreshError) {\n          console.error(\"Token refresh failed:\", refreshError);\n\n          localStorage.removeItem(ACCESS_TOKEN);\n          localStorage.removeItem(REFRESH_TOKEN);\n          window.location.href = \"/login\";\n        }\n      } else {\n        console.warn(\"No refresh token was found.\");\n        localStorage.removeItem(ACCESS_TOKEN);\n        localStorage.removeItem(REFRESH_TOKEN);\n        window.location.href = \"/login\";\n      }\n    }\n    return Promise.reject(error);\n  }\n);\n\nexport default api;"],"names":[],"mappings":";;;AACA;AADA;AAIW;;;AADX,MAAM,MAAqB,wIAAA,CAAA,UAAK,CAAC,MAAM,CAAC;IACtC,SAAS,gKAAA,CAAA,UAAO,CAAC,GAAG,CAAC,GAAG;AAC1B;AAEA,IAAI,YAAY,CAAC,OAAO,CAAC,GAAG,CAC1B,CAAC;IACC,MAAM,QAAuB,aAAa,OAAO,CAAC,kHAAA,CAAA,eAAY;IAE9D,IAAI,OAAO;QACT,OAAO,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,OAAO;IAClD;IACA,OAAO;AACT,GACA,CAAC;IACC,QAAQ,MAAM,CAAC;AACjB;AAGF,IAAI,YAAY,CAAC,QAAQ,CAAC,GAAG,CAC3B,CAAC,WAA4B,UAC7B,OAAO;IACL,MAAM,kBAAkB,MAAM,MAAM;IAEpC,IAAI,MAAM,QAAQ,EAAE,UAAU,OAAO,CAAC,gBAAgB,MAAM,EAAE;QAC5D,gBAAgB,MAAM,GAAG;QAEzB,MAAM,eAA8B,aAAa,OAAO,CAAC,kHAAA,CAAA,gBAAa;QACtE,IAAI,cAAc;YAChB,IAAI;gBACF,MAAM,MAAM,MAAM,wIAAA,CAAA,UAAK,CAAC,IAAI,CAC1B,GAAG,gKAAA,CAAA,UAAO,CAAC,GAAG,CAAC,GAAG,CAAC,mBAAmB,CAAC,EAAE;oBAAE,SAAS;gBAAa;gBAEnE,IAAI,IAAI,MAAM,KAAK,KAAK;oBACtB,MAAM,iBAAiB,IAAI,IAAI,CAAC,MAAM;oBACtC,aAAa,OAAO,CAAC,kHAAA,CAAA,eAAY,EAAE;oBAEnC,IAAI,gBAAgB,OAAO,EAAE;wBAC3B,gBAAgB,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,gBAAgB;oBACpE;oBACA,OAAO,IAAI;gBACb;YACF,EACA,OAAO,cAAc;gBACnB,QAAQ,KAAK,CAAC,yBAAyB;gBAEvC,aAAa,UAAU,CAAC,kHAAA,CAAA,eAAY;gBACpC,aAAa,UAAU,CAAC,kHAAA,CAAA,gBAAa;gBACrC,OAAO,QAAQ,CAAC,IAAI,GAAG;YACzB;QACF,OAAO;YACL,QAAQ,IAAI,CAAC;YACb,aAAa,UAAU,CAAC,kHAAA,CAAA,eAAY;YACpC,aAAa,UAAU,CAAC,kHAAA,CAAA,gBAAa;YACrC,OAAO,QAAQ,CAAC,IAAI,GAAG;QACzB;IACF;IACA,OAAO,QAAQ,MAAM,CAAC;AACxB;uCAGa"}},
    {"offset": {"line": 79, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 85, "column": 0}, "map": {"version":3,"sources":["file:///home/pavan-kumar/pavan/dummy/front-end/app/auth/login/Page.tsx"],"sourcesContent":["\"use client\";\n\nimport api from '@/lib/api';\nimport { ACCESS_TOKEN, REFRESH_TOKEN } from '@/lib/constant';\nimport type React from 'react';\nimport { useState } from 'react'\nimport { useNavigate } from 'react-router-dom';\n\n\nconst Login = () => {\n  const [formData, setFormData] = useState({\n    username: \"\",\n    password: \"\"\n  });\n\n  const [error, setError] = useState(\"\");\n  const navigate = useNavigate();\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const { name, value } = e.target;\n\n    setFormData((prevData) => ({\n      ...prevData,\n      [name]: value,\n    }));\n  };\n\n  const handleSubmit = async (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault()\n    setError('');\n\n    try {\n      const res = await api.post(\"auth/token/\", formData);\n\n      if (res.status === 200) {\n        localStorage.setItem(ACCESS_TOKEN, res.data.access);\n        localStorage.setItem(REFRESH_TOKEN, res.data.refresh);\n        navigate(\"/\");\n      }\n    } catch (err) {\n      console.log(\"Login Error\", err)\n      if (err instanceof Error) {\n        setError(err.message || \"Login Failed\")\n      } else {\n        setError(\"An unknown error occurred\")\n      }\n    }\n  };\n\n  return (\n    <>\n      <div className=\"flex justify-center items-center min-h-screen bg-gradient-to-br from-gray-900 to-gray-800 text-gray-100\">\n        <div className=\"bg-gray-900 p-8 rounded-xl shadow-xl w-1/4 border border-gray-700\">\n          <h2 className=\"text-3xl font-extrabold text-center mb-6 text-gray-400\">\n            Login\n          </h2>\n          {error && (\n            <p className=\"text-red-500 text-center mb-4 animate-bounce\">\n              {error}\n            </p>\n          )}\n          <form onSubmit={handleSubmit}>\n            <div className=\"mb-4\">\n              <label\n                htmlFor=\"username\"\n                className=\"block text-sm font-medium text-gray-400\"\n              >\n                Username\n              </label>\n              <input\n                type=\"text\"\n                id=\"username\"\n                name=\"username\"\n                value={formData.username}\n                onChange={handleChange}\n                required\n                maxLength={150}\n                className=\"mt-1 block w-full px-4 py-2 bg-gray-800 border border-gray-600 text-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition\"\n              />\n            </div>\n            <div className=\"mb-4\">\n              <label\n                htmlFor=\"password\"\n                className=\"block text-sm font-medium text-gray-400\"\n              >\n                Password\n              </label>\n              <input\n                type=\"password\"\n                id=\"password\"\n                name=\"password\"\n                value={formData.password}\n                onChange={handleChange}\n                required\n                className=\"mt-1 block w-full px-4 py-2 bg-gray-800 border border-gray-600 text-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition\"\n              />\n            </div>\n            <button\n              type=\"submit\"\n              className=\"w-full mt-[20px] mb-10 py-2 px-4 bg-blue-600 text-white rounded-lg hover:bg-blue-500 focus:outline-none focus:ring-4 focus:ring-blue-700 shadow-lg transition\"\n            >\n              Login\n            </button>\n          </form>\n        </div>\n      </div>\n    </>\n  )\n};\n\nexport default Login\n"],"names":[],"mappings":";;;;AAEA;AACA;AAEA;AACA;;;AANA;;;;;AASA,MAAM,QAAQ;;IACZ,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;QACvC,UAAU;QACV,UAAU;IACZ;IAEA,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACnC,MAAM,WAAW,CAAA,GAAA,+KAAA,CAAA,cAAW,AAAD;IAE3B,MAAM,eAAe,CAAC;QACpB,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,EAAE,MAAM;QAEhC,YAAY,CAAC,WAAa,CAAC;gBACzB,GAAG,QAAQ;gBACX,CAAC,KAAK,EAAE;YACV,CAAC;IACH;IAEA,MAAM,eAAe,OAAO;QAC1B,EAAE,cAAc;QAChB,SAAS;QAET,IAAI;YACF,MAAM,MAAM,MAAM,6GAAA,CAAA,UAAG,CAAC,IAAI,CAAC,eAAe;YAE1C,IAAI,IAAI,MAAM,KAAK,KAAK;gBACtB,aAAa,OAAO,CAAC,kHAAA,CAAA,eAAY,EAAE,IAAI,IAAI,CAAC,MAAM;gBAClD,aAAa,OAAO,CAAC,kHAAA,CAAA,gBAAa,EAAE,IAAI,IAAI,CAAC,OAAO;gBACpD,SAAS;YACX;QACF,EAAE,OAAO,KAAK;YACZ,QAAQ,GAAG,CAAC,eAAe;YAC3B,IAAI,eAAe,OAAO;gBACxB,SAAS,IAAI,OAAO,IAAI;YAC1B,OAAO;gBACL,SAAS;YACX;QACF;IACF;IAEA,qBACE;kBACE,cAAA,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAG,WAAU;kCAAyD;;;;;;oBAGtE,uBACC,6LAAC;wBAAE,WAAU;kCACV;;;;;;kCAGL,6LAAC;wBAAK,UAAU;;0CACd,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCACC,SAAQ;wCACR,WAAU;kDACX;;;;;;kDAGD,6LAAC;wCACC,MAAK;wCACL,IAAG;wCACH,MAAK;wCACL,OAAO,SAAS,QAAQ;wCACxB,UAAU;wCACV,QAAQ;wCACR,WAAW;wCACX,WAAU;;;;;;;;;;;;0CAGd,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCACC,SAAQ;wCACR,WAAU;kDACX;;;;;;kDAGD,6LAAC;wCACC,MAAK;wCACL,IAAG;wCACH,MAAK;wCACL,OAAO,SAAS,QAAQ;wCACxB,UAAU;wCACV,QAAQ;wCACR,WAAU;;;;;;;;;;;;0CAGd,6LAAC;gCACC,MAAK;gCACL,WAAU;0CACX;;;;;;;;;;;;;;;;;;;;;;;;AAQb;GAnGM;;QAOa,+KAAA,CAAA,cAAW;;;KAPxB;uCAqGS"}},
    {"offset": {"line": 262, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}