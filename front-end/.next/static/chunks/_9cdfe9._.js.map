{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/pavan-kumar/pavan/others/front-end/lib/constant.ts"],"sourcesContent":["export const ACCESS_TOKEN: string = 'access';\nexport const REFRESH_TOKEN: string = 'refresh';"],"names":[],"mappings":";;;;AAAO,MAAM,eAAuB;AAC7B,MAAM,gBAAwB"}},
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///home/pavan-kumar/pavan/others/front-end/lib/api.ts"],"sourcesContent":["import axios, { AxiosError, AxiosInstance, AxiosResponse, InternalAxiosRequestConfig } from \"axios\";\nimport { ACCESS_TOKEN, REFRESH_TOKEN } from \"../lib/constant\";\n\nconst BASE_URL = process.env.NEXT_PUBLIC_API_URL;\n\nconst api: AxiosInstance = axios.create({\n  baseURL: BASE_URL as string,\n  headers: {\n    \"Content-Type\": \"application/json\",\n  },\n});\n\napi.interceptors.request.use(\n  (config: InternalAxiosRequestConfig) => {\n    if (typeof window !== \"undefined\") {\n      const token = localStorage.getItem(ACCESS_TOKEN);\n      if (token) {\n        config.headers = config.headers || {}; \n        config.headers.Authorization = `Bearer ${token}`;\n      }\n    }\n    return config;\n  },\n  (error) => Promise.reject(error)\n);\n\nconst AUTH_ENDPOINTS = [\"/auth/token/\", \"/auth/user/\"];\n\napi.interceptors.response.use(\n  (response: AxiosResponse) => response,\n  async (error: AxiosError) => {\n    const originalRequest = error.config as InternalAxiosRequestConfig & { _retry?: boolean };\n\n    if (!originalRequest || originalRequest.url === undefined) {\n      return Promise.reject(error);\n    }\n\n    const isAuthEndpoint = AUTH_ENDPOINTS.some(endpoint => \n      originalRequest.url?.startsWith(endpoint) || originalRequest.url === endpoint\n    );\n\n    if (isAuthEndpoint) {\n      return Promise.reject(error);\n    }\n\n    if (error.response?.status === 401 && !originalRequest._retry) {\n      originalRequest._retry = true;\n\n      if (typeof window !== \"undefined\") {\n        const refreshToken = localStorage.getItem(REFRESH_TOKEN);\n        \n        if (refreshToken) {\n          try {\n            const res = await api.post(\"/auth/token/refresh/\", { \n              refresh: refreshToken \n            });\n\n            if (res.status === 200 && res.data?.access) {\n              const newAccessToken = res.data.access;\n              localStorage.setItem(ACCESS_TOKEN, newAccessToken);\n\n              originalRequest.headers = originalRequest.headers || {};\n              originalRequest.headers.Authorization = `Bearer ${newAccessToken}`;\n\n              return api(originalRequest);\n            }\n          } catch (refreshError) {\n            localStorage.removeItem(ACCESS_TOKEN);\n            localStorage.removeItem(REFRESH_TOKEN);\n            \n            if (typeof window !== \"undefined\") {\n              window.location.href = \"/login\"; \n            }\n          }\n        } else {\n          if (typeof window !== \"undefined\") {\n            window.location.href = \"/login\";\n          }\n        }\n      }\n    }\n\n    return Promise.reject(error);\n  }\n);\n\nexport default api;"],"names":[],"mappings":";;;AACA;AAEiB;AAHjB;;;AAGA,MAAM;AAEN,MAAM,MAAqB,wIAAA,CAAA,UAAK,CAAC,MAAM,CAAC;IACtC,SAAS;IACT,SAAS;QACP,gBAAgB;IAClB;AACF;AAEA,IAAI,YAAY,CAAC,OAAO,CAAC,GAAG,CAC1B,CAAC;IACC,wCAAmC;QACjC,MAAM,QAAQ,aAAa,OAAO,CAAC,kHAAA,CAAA,eAAY;QAC/C,IAAI,OAAO;YACT,OAAO,OAAO,GAAG,OAAO,OAAO,IAAI,CAAC;YACpC,OAAO,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,OAAO;QAClD;IACF;IACA,OAAO;AACT,GACA,CAAC,QAAU,QAAQ,MAAM,CAAC;AAG5B,MAAM,iBAAiB;IAAC;IAAgB;CAAc;AAEtD,IAAI,YAAY,CAAC,QAAQ,CAAC,GAAG,CAC3B,CAAC,WAA4B,UAC7B,OAAO;IACL,MAAM,kBAAkB,MAAM,MAAM;IAEpC,IAAI,CAAC,mBAAmB,gBAAgB,GAAG,KAAK,WAAW;QACzD,OAAO,QAAQ,MAAM,CAAC;IACxB;IAEA,MAAM,iBAAiB,eAAe,IAAI,CAAC,CAAA,WACzC,gBAAgB,GAAG,EAAE,WAAW,aAAa,gBAAgB,GAAG,KAAK;IAGvE,IAAI,gBAAgB;QAClB,OAAO,QAAQ,MAAM,CAAC;IACxB;IAEA,IAAI,MAAM,QAAQ,EAAE,WAAW,OAAO,CAAC,gBAAgB,MAAM,EAAE;QAC7D,gBAAgB,MAAM,GAAG;QAEzB,wCAAmC;YACjC,MAAM,eAAe,aAAa,OAAO,CAAC,kHAAA,CAAA,gBAAa;YAEvD,IAAI,cAAc;gBAChB,IAAI;oBACF,MAAM,MAAM,MAAM,IAAI,IAAI,CAAC,wBAAwB;wBACjD,SAAS;oBACX;oBAEA,IAAI,IAAI,MAAM,KAAK,OAAO,IAAI,IAAI,EAAE,QAAQ;wBAC1C,MAAM,iBAAiB,IAAI,IAAI,CAAC,MAAM;wBACtC,aAAa,OAAO,CAAC,kHAAA,CAAA,eAAY,EAAE;wBAEnC,gBAAgB,OAAO,GAAG,gBAAgB,OAAO,IAAI,CAAC;wBACtD,gBAAgB,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,gBAAgB;wBAElE,OAAO,IAAI;oBACb;gBACF,EAAE,OAAO,cAAc;oBACrB,aAAa,UAAU,CAAC,kHAAA,CAAA,eAAY;oBACpC,aAAa,UAAU,CAAC,kHAAA,CAAA,gBAAa;oBAErC,wCAAmC;wBACjC,OAAO,QAAQ,CAAC,IAAI,GAAG;oBACzB;gBACF;YACF,OAAO;gBACL,wCAAmC;oBACjC,OAAO,QAAQ,CAAC,IAAI,GAAG;gBACzB;YACF;QACF;IACF;IAEA,OAAO,QAAQ,MAAM,CAAC;AACxB;uCAGa"}},
    {"offset": {"line": 96, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 102, "column": 0}, "map": {"version":3,"sources":["file:///home/pavan-kumar/pavan/others/front-end/components/ProtectedRoute.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\n\nimport { useEffect, useState } from \"react\"\nimport { useRouter } from \"next/navigation\"\nimport { ACCESS_TOKEN, REFRESH_TOKEN } from \"@/lib/constant\"\nimport { jwtDecode } from \"jwt-decode\"\nimport api from \"@/lib/api\"\n\nconst ProtectedRoute = ({ children }: { children: React.ReactNode }) => {\n  const [isAuthorized, setIsAuthorized] = useState<boolean | null>(null);\n  const [isLoading, setIsLoading] = useState(true)\n  const router = useRouter()\n\n  useEffect(() => {\n    if (typeof window === \"undefined\") {\n      return\n    }\n    \n    const checkAuth = async () => {\n      try {\n        await auth()\n      } catch (error) {\n        setIsAuthorized(false)\n        setIsLoading(false)\n      }\n    }\n    checkAuth()\n  }, [])\n\n  const refresh = async () => {\n    const refreshToken = localStorage.getItem(REFRESH_TOKEN)\n\n    try {\n      const res = await api.post(\"auth/token/refresh\", { refresh: refreshToken })\n\n      if (res.status === 200) {\n        setIsAuthorized(true)\n        localStorage.setItem(ACCESS_TOKEN, res.data.access)\n      } else {\n        setIsAuthorized(false)\n      }\n    } catch (error) {\n      console.log(\"Error in Refreshing Token\", error)\n      setIsAuthorized(false)\n    }\n    setIsLoading(false)\n  }\n\n  const auth = async () => {\n    const token = localStorage.getItem(ACCESS_TOKEN)\n\n    if (!token) {\n      setIsAuthorized(false)\n      setIsLoading(false)\n      return\n    }\n\n    try {\n      const decode = jwtDecode(token)\n      const tokenExpiration: number = (decode as any).exp\n      const now = Date.now() / 1000\n\n      if (tokenExpiration < now) {\n        await refresh()\n      } else {\n        setIsAuthorized(true)\n        setIsLoading(false)\n      }\n    } catch (error) {\n      console.log(\"Error in Decoding\", error)\n      setIsAuthorized(false)\n      setIsLoading(false)\n    }\n  }\n\n  useEffect(() => {\n    if (!isLoading && !isAuthorized) {\n      router.replace(\"/auth/login\")\n    }\n  }, [isLoading, isAuthorized, router])\n\n  if (isLoading) {\n    return <div className=\"flex justify-center items-center min-h-screen\">Loading...</div>\n  }\n\n\n  if (!isAuthorized) {\n    return null\n  }\n\n  return children\n}\n\nexport default ProtectedRoute"],"names":[],"mappings":";;;;AAIA;AACA;AACA;AACA;AACA;;;AARA;;;;;;AAUA,MAAM,iBAAiB,CAAC,EAAE,QAAQ,EAAiC;;IACjE,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAkB;IACjE,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAC3C,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IAEvB,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;oCAAE;YACR,uCAAmC;;YAEnC;YAEA,MAAM;sDAAY;oBAChB,IAAI;wBACF,MAAM;oBACR,EAAE,OAAO,OAAO;wBACd,gBAAgB;wBAChB,aAAa;oBACf;gBACF;;YACA;QACF;mCAAG,EAAE;IAEL,MAAM,UAAU;QACd,MAAM,eAAe,aAAa,OAAO,CAAC,kHAAA,CAAA,gBAAa;QAEvD,IAAI;YACF,MAAM,MAAM,MAAM,6GAAA,CAAA,UAAG,CAAC,IAAI,CAAC,sBAAsB;gBAAE,SAAS;YAAa;YAEzE,IAAI,IAAI,MAAM,KAAK,KAAK;gBACtB,gBAAgB;gBAChB,aAAa,OAAO,CAAC,kHAAA,CAAA,eAAY,EAAE,IAAI,IAAI,CAAC,MAAM;YACpD,OAAO;gBACL,gBAAgB;YAClB;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,GAAG,CAAC,6BAA6B;YACzC,gBAAgB;QAClB;QACA,aAAa;IACf;IAEA,MAAM,OAAO;QACX,MAAM,QAAQ,aAAa,OAAO,CAAC,kHAAA,CAAA,eAAY;QAE/C,IAAI,CAAC,OAAO;YACV,gBAAgB;YAChB,aAAa;YACb;QACF;QAEA,IAAI;YACF,MAAM,SAAS,CAAA,GAAA,yJAAA,CAAA,YAAS,AAAD,EAAE;YACzB,MAAM,kBAA0B,AAAC,OAAe,GAAG;YACnD,MAAM,MAAM,KAAK,GAAG,KAAK;YAEzB,IAAI,kBAAkB,KAAK;gBACzB,MAAM;YACR,OAAO;gBACL,gBAAgB;gBAChB,aAAa;YACf;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,GAAG,CAAC,qBAAqB;YACjC,gBAAgB;YAChB,aAAa;QACf;IACF;IAEA,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;oCAAE;YACR,IAAI,CAAC,aAAa,CAAC,cAAc;gBAC/B,OAAO,OAAO,CAAC;YACjB;QACF;mCAAG;QAAC;QAAW;QAAc;KAAO;IAEpC,IAAI,WAAW;QACb,qBAAO,6LAAC;YAAI,WAAU;sBAAgD;;;;;;IACxE;IAGA,IAAI,CAAC,cAAc;QACjB,OAAO;IACT;IAEA,OAAO;AACT;GAnFM;;QAGW,qIAAA,CAAA,YAAS;;;KAHpB;uCAqFS"}},
    {"offset": {"line": 221, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}