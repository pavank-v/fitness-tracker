{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/pavan-kumar/pavan/others/front-end/lib/constant.ts"],"sourcesContent":["export const ACCESS_TOKEN: string = 'access';\nexport const REFRESH_TOKEN: string = 'refresh';"],"names":[],"mappings":";;;;AAAO,MAAM,eAAuB;AAC7B,MAAM,gBAAwB"}},
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///home/pavan-kumar/pavan/others/front-end/lib/api.ts"],"sourcesContent":["import axios, { AxiosError, AxiosInstance, AxiosResponse, InternalAxiosRequestConfig } from \"axios\";\nimport { ACCESS_TOKEN, REFRESH_TOKEN } from \"../lib/constant\";\n\nconst BASE_URL = process.env.NEXT_PUBLIC_API_URL;\n\nconst api: AxiosInstance = axios.create({\n  baseURL: BASE_URL as string,\n  headers: {\n    \"Content-Type\": \"application/json\",\n  },\n});\n\napi.interceptors.request.use(\n  (config: InternalAxiosRequestConfig) => {\n    if (typeof window !== \"undefined\") {\n      const token = localStorage.getItem(ACCESS_TOKEN);\n      if (token) {\n        config.headers = config.headers || {}; \n        config.headers.Authorization = `Bearer ${token}`;\n      }\n    }\n    return config;\n  },\n  (error) => Promise.reject(error)\n);\n\nconst AUTH_ENDPOINTS = [\"/auth/token/\", \"/auth/user/\"];\n\napi.interceptors.response.use(\n  (response: AxiosResponse) => response,\n  async (error: AxiosError) => {\n    const originalRequest = error.config as InternalAxiosRequestConfig & { _retry?: boolean };\n\n    if (!originalRequest || originalRequest.url === undefined) {\n      return Promise.reject(error);\n    }\n\n    const isAuthEndpoint = AUTH_ENDPOINTS.some(endpoint => \n      originalRequest.url?.startsWith(endpoint) || originalRequest.url === endpoint\n    );\n\n    if (isAuthEndpoint) {\n      return Promise.reject(error);\n    }\n\n    if (error.response?.status === 401 && !originalRequest._retry) {\n      originalRequest._retry = true;\n\n      if (typeof window !== \"undefined\") {\n        const refreshToken = localStorage.getItem(REFRESH_TOKEN);\n        \n        if (refreshToken) {\n          try {\n            const res = await api.post(\"/auth/token/refresh/\", { \n              refresh: refreshToken \n            });\n\n            if (res.status === 200 && res.data?.access) {\n              const newAccessToken = res.data.access;\n              localStorage.setItem(ACCESS_TOKEN, newAccessToken);\n\n              originalRequest.headers = originalRequest.headers || {};\n              originalRequest.headers.Authorization = `Bearer ${newAccessToken}`;\n\n              return api(originalRequest);\n            }\n          } catch (refreshError) {\n            localStorage.removeItem(ACCESS_TOKEN);\n            localStorage.removeItem(REFRESH_TOKEN);\n            \n            if (typeof window !== \"undefined\") {\n              window.location.href = \"/login\"; \n            }\n          }\n        } else {\n          if (typeof window !== \"undefined\") {\n            window.location.href = \"/login\";\n          }\n        }\n      }\n    }\n\n    return Promise.reject(error);\n  }\n);\n\nexport default api;"],"names":[],"mappings":";;;AACA;AAEiB;AAHjB;;;AAGA,MAAM;AAEN,MAAM,MAAqB,wIAAA,CAAA,UAAK,CAAC,MAAM,CAAC;IACtC,SAAS;IACT,SAAS;QACP,gBAAgB;IAClB;AACF;AAEA,IAAI,YAAY,CAAC,OAAO,CAAC,GAAG,CAC1B,CAAC;IACC,wCAAmC;QACjC,MAAM,QAAQ,aAAa,OAAO,CAAC,kHAAA,CAAA,eAAY;QAC/C,IAAI,OAAO;YACT,OAAO,OAAO,GAAG,OAAO,OAAO,IAAI,CAAC;YACpC,OAAO,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,OAAO;QAClD;IACF;IACA,OAAO;AACT,GACA,CAAC,QAAU,QAAQ,MAAM,CAAC;AAG5B,MAAM,iBAAiB;IAAC;IAAgB;CAAc;AAEtD,IAAI,YAAY,CAAC,QAAQ,CAAC,GAAG,CAC3B,CAAC,WAA4B,UAC7B,OAAO;IACL,MAAM,kBAAkB,MAAM,MAAM;IAEpC,IAAI,CAAC,mBAAmB,gBAAgB,GAAG,KAAK,WAAW;QACzD,OAAO,QAAQ,MAAM,CAAC;IACxB;IAEA,MAAM,iBAAiB,eAAe,IAAI,CAAC,CAAA,WACzC,gBAAgB,GAAG,EAAE,WAAW,aAAa,gBAAgB,GAAG,KAAK;IAGvE,IAAI,gBAAgB;QAClB,OAAO,QAAQ,MAAM,CAAC;IACxB;IAEA,IAAI,MAAM,QAAQ,EAAE,WAAW,OAAO,CAAC,gBAAgB,MAAM,EAAE;QAC7D,gBAAgB,MAAM,GAAG;QAEzB,wCAAmC;YACjC,MAAM,eAAe,aAAa,OAAO,CAAC,kHAAA,CAAA,gBAAa;YAEvD,IAAI,cAAc;gBAChB,IAAI;oBACF,MAAM,MAAM,MAAM,IAAI,IAAI,CAAC,wBAAwB;wBACjD,SAAS;oBACX;oBAEA,IAAI,IAAI,MAAM,KAAK,OAAO,IAAI,IAAI,EAAE,QAAQ;wBAC1C,MAAM,iBAAiB,IAAI,IAAI,CAAC,MAAM;wBACtC,aAAa,OAAO,CAAC,kHAAA,CAAA,eAAY,EAAE;wBAEnC,gBAAgB,OAAO,GAAG,gBAAgB,OAAO,IAAI,CAAC;wBACtD,gBAAgB,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,gBAAgB;wBAElE,OAAO,IAAI;oBACb;gBACF,EAAE,OAAO,cAAc;oBACrB,aAAa,UAAU,CAAC,kHAAA,CAAA,eAAY;oBACpC,aAAa,UAAU,CAAC,kHAAA,CAAA,gBAAa;oBAErC,wCAAmC;wBACjC,OAAO,QAAQ,CAAC,IAAI,GAAG;oBACzB;gBACF;YACF,OAAO;gBACL,wCAAmC;oBACjC,OAAO,QAAQ,CAAC,IAAI,GAAG;gBACzB;YACF;QACF;IACF;IAEA,OAAO,QAAQ,MAAM,CAAC;AACxB;uCAGa"}},
    {"offset": {"line": 96, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 102, "column": 0}, "map": {"version":3,"sources":["file:///home/pavan-kumar/pavan/others/front-end/app/auth/login/page.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\nimport { LogIn } from \"lucide-react\"\nimport { useState } from \"react\"\nimport { useRouter } from \"next/navigation\"\nimport api from \"@/lib/api\"\nimport { ACCESS_TOKEN, REFRESH_TOKEN } from \"@/lib/constant\"\nimport axios from \"axios\"\n\nconst Login = () => {\n  const [formData, setFormData] = useState({\n    username: \"\",\n    password: \"\",\n  })\n\n  const [error, setError] = useState(\"\")\n  const router = useRouter()\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const { name, value } = e.target\n    setFormData((prevData) => ({\n      ...prevData,\n      [name]: value,\n    }))\n  }\n\n  const handleSubmit = async (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault()\n    setError(\"\")\n\n    try {\n      console.log(\"Submitting login request:\", formData)\n      const res = await api.post(\"/auth/token/\", formData)\n      console.log(\"Login Response:\", res)\n\n      if (res.status === 200) {\n        console.log(\"Login successful! Redirecting...\");\n        localStorage.setItem(ACCESS_TOKEN, res.data.access);\n        localStorage.setItem(REFRESH_TOKEN, res.data.refresh);\n\n        if (!res.data.access || !res.data.refresh) {\n          console.log(\"Tokens not received, stopping redirect.\");\n          return;\n        }\n\n        router.push(\"/home\");\n      }\n    } catch (err) {\n      console.log(\"Login Error\", err);\n\n      if (axios.isAxiosError(err)) {\n        const errorMessage = err.response?.data?.detail || \"Invalid credentials\";\n        setError(errorMessage);\n        return;\n      } else {\n        setError(\"An unknown error occurred\");\n      }\n    }\n  }\n\n\n  return (\n    <>\n      <div className=\"relative min-h-screen text-white font-sans z-10\">\n        <div className=\"relative flex justify-center items-center min-h-screen py-12 px-4 sm:px-6 lg:px-8\">\n          <div className=\"bg-black bg-opacity-30 backdrop-blur-xl p-8 rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50\">\n            <div className=\"flex items-center justify-center mb-8\">\n              <LogIn className=\"w-8 h-8 text-cyan-500 mr-3\" />\n              <h2 className=\"text-3xl font-extrabold bg-gradient-to-r from-cyan-400 to-blue-400 bg-clip-text text-transparent\">\n                Welcome Back\n              </h2>\n            </div>\n\n            {error && (\n              <div className=\"mb-6 p-4 bg-red-500/10 border border-red-500/20 rounded-lg\">\n                <p className=\"text-red-400 text-center text-sm\">{error}</p>\n              </div>\n            )}\n\n            <form onSubmit={handleSubmit} className=\"space-y-6\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-300\">\n                  Username\n                </label>\n                <input\n                  type=\"text\"\n                  name=\"username\"\n                  value={formData.username}\n                  onChange={handleChange}\n                  required\n                  maxLength={150}\n                  className=\"peer mt-1 block w-full px-4 py-3 bg-gray-900/50 border border-gray-600/50 text-gray-100 rounded-xl focus:outline-none focus:ring-2 focus:ring-cyan-500/50 focus:border-transparent transition-all duration-200 placeholder-gray-900\"\n                  placeholder=\"Enter your username\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-300\">\n                  Password\n                </label>\n                <input\n                  type=\"password\"\n                  name=\"password\"\n                  value={formData.password}\n                  onChange={handleChange}\n                  required\n                  className=\"peer mt-1 block w-full px-4 py-3 bg-gray-900/50 border border-gray-600/50 text-gray-100 rounded-xl focus:outline-none focus:ring-2 focus:ring-cyan-500/50 focus:border-transparent transition-all duration-200 placeholder-gray-900\"\n                  placeholder=\"Enter your password\"\n                />\n              </div>\n\n              <button\n                type=\"submit\"\n                className=\"w-full py-3 px-4 bg-gradient-to-r from-cyan-500 to-blue-500 text-white rounded-xl hover:from-cyan-600 hover:to-blue-600 focus:outline-none focus:ring-4 focus:ring-cyan-500/50 transform hover:scale-[1.02] transition-all duration-200 font-medium text-lg shadow-lg shadow-cyan-500/25\"\n              >\n                Sign In\n              </button>\n            </form>\n          </div>\n        </div>\n      </div>\n    </>\n  )\n}\n\nexport default Login\n\n"],"names":[],"mappings":";;;;AAIA;AACA;AACA;AACA;AACA;AALA;;;AAHA;;;;;;;AAUA,MAAM,QAAQ;;IACZ,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;QACvC,UAAU;QACV,UAAU;IACZ;IAEA,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACnC,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IAEvB,MAAM,eAAe,CAAC;QACpB,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,EAAE,MAAM;QAChC,YAAY,CAAC,WAAa,CAAC;gBACzB,GAAG,QAAQ;gBACX,CAAC,KAAK,EAAE;YACV,CAAC;IACH;IAEA,MAAM,eAAe,OAAO;QAC1B,EAAE,cAAc;QAChB,SAAS;QAET,IAAI;YACF,QAAQ,GAAG,CAAC,6BAA6B;YACzC,MAAM,MAAM,MAAM,6GAAA,CAAA,UAAG,CAAC,IAAI,CAAC,gBAAgB;YAC3C,QAAQ,GAAG,CAAC,mBAAmB;YAE/B,IAAI,IAAI,MAAM,KAAK,KAAK;gBACtB,QAAQ,GAAG,CAAC;gBACZ,aAAa,OAAO,CAAC,kHAAA,CAAA,eAAY,EAAE,IAAI,IAAI,CAAC,MAAM;gBAClD,aAAa,OAAO,CAAC,kHAAA,CAAA,gBAAa,EAAE,IAAI,IAAI,CAAC,OAAO;gBAEpD,IAAI,CAAC,IAAI,IAAI,CAAC,MAAM,IAAI,CAAC,IAAI,IAAI,CAAC,OAAO,EAAE;oBACzC,QAAQ,GAAG,CAAC;oBACZ;gBACF;gBAEA,OAAO,IAAI,CAAC;YACd;QACF,EAAE,OAAO,KAAK;YACZ,QAAQ,GAAG,CAAC,eAAe;YAE3B,IAAI,wIAAA,CAAA,UAAK,CAAC,YAAY,CAAC,MAAM;gBAC3B,MAAM,eAAe,IAAI,QAAQ,EAAE,MAAM,UAAU;gBACnD,SAAS;gBACT;YACF,OAAO;gBACL,SAAS;YACX;QACF;IACF;IAGA,qBACE;kBACE,cAAA,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAI,WAAU;;8CACb,6LAAC,2MAAA,CAAA,QAAK;oCAAC,WAAU;;;;;;8CACjB,6LAAC;oCAAG,WAAU;8CAAmG;;;;;;;;;;;;wBAKlH,uBACC,6LAAC;4BAAI,WAAU;sCACb,cAAA,6LAAC;gCAAE,WAAU;0CAAoC;;;;;;;;;;;sCAIrD,6LAAC;4BAAK,UAAU;4BAAc,WAAU;;8CACtC,6LAAC;;sDACC,6LAAC;4CAAM,WAAU;sDAA0C;;;;;;sDAG3D,6LAAC;4CACC,MAAK;4CACL,MAAK;4CACL,OAAO,SAAS,QAAQ;4CACxB,UAAU;4CACV,QAAQ;4CACR,WAAW;4CACX,WAAU;4CACV,aAAY;;;;;;;;;;;;8CAIhB,6LAAC;;sDACC,6LAAC;4CAAM,WAAU;sDAA0C;;;;;;sDAG3D,6LAAC;4CACC,MAAK;4CACL,MAAK;4CACL,OAAO,SAAS,QAAQ;4CACxB,UAAU;4CACV,QAAQ;4CACR,WAAU;4CACV,aAAY;;;;;;;;;;;;8CAIhB,6LAAC;oCACC,MAAK;oCACL,WAAU;8CACX;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASf;GAlHM;;QAOW,qIAAA,CAAA,YAAS;;;KAPpB;uCAoHS"}},
    {"offset": {"line": 319, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}