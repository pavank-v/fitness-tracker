{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 39, "column": 0}, "map": {"version":3,"sources":["file:///home/pavan-kumar/pavan/dummy/front-end/lib/constant.ts"],"sourcesContent":["export const ACCESS_TOKEN: string = 'access';\nexport const REFRESH_TOKEN: string = 'refresh';"],"names":[],"mappings":";;;;AAAO,MAAM,eAAuB;AAC7B,MAAM,gBAAwB"}},
    {"offset": {"line": 45, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 147, "column": 0}, "map": {"version":3,"sources":["file:///home/pavan-kumar/pavan/dummy/front-end/lib/api.ts"],"sourcesContent":["import axios, { AxiosError, AxiosInstance, AxiosRequestConfig, AxiosResponse, InternalAxiosRequestConfig } from \"axios\";\nimport { ACCESS_TOKEN, REFRESH_TOKEN } from \"../lib/constant\";\n\nconst api: AxiosInstance = axios.create({\n  baseURL: process.env.url as string,\n});\n\napi.interceptors.request.use(\n  (config: InternalAxiosRequestConfig) => {\n    const token: string | null = localStorage.getItem(ACCESS_TOKEN);\n\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    return config;\n  },\n  (error) => {\n    Promise.reject(error);\n  }\n);\n\napi.interceptors.response.use(\n  (response: AxiosResponse) => response,\n  async (error: AxiosError) => {\n    const originalRequest = error.config as AxiosRequestConfig & { _retry?: boolean };\n\n    if (error.response?.status == 401 && !originalRequest._retry) {\n      originalRequest._retry = true;\n\n      const refreshToken: string | null = localStorage.getItem(REFRESH_TOKEN);\n      if (refreshToken) {\n        try {\n          const res = await axios.post(\n            `${process.env.url}/auth/token/refresh`, { refresh: refreshToken },\n          )\n          if (res.status === 200) {\n            const newAccessToken = res.data.access;\n            localStorage.setItem(ACCESS_TOKEN, newAccessToken)\n\n            if (originalRequest.headers) {\n              originalRequest.headers.Authorization = `Bearer ${newAccessToken}`;\n            }\n            return api(originalRequest)\n          }\n        }\n        catch (refreshError) {\n          console.error(\"Token refresh failed:\", refreshError);\n\n          localStorage.removeItem(ACCESS_TOKEN);\n          localStorage.removeItem(REFRESH_TOKEN);\n          window.location.href = \"/login\";\n        }\n      } else {\n        console.warn(\"No refresh token was found.\");\n        localStorage.removeItem(ACCESS_TOKEN);\n        localStorage.removeItem(REFRESH_TOKEN);\n        window.location.href = \"/login\";\n      }\n    }\n    return Promise.reject(error);\n  }\n);\n\nexport default api;"],"names":[],"mappings":";;;AACA;AADA;;;AAGA,MAAM,MAAqB,qIAAA,CAAA,UAAK,CAAC,MAAM,CAAC;IACtC,SAAS,QAAQ,GAAG,CAAC,GAAG;AAC1B;AAEA,IAAI,YAAY,CAAC,OAAO,CAAC,GAAG,CAC1B,CAAC;IACC,MAAM,QAAuB,aAAa,OAAO,CAAC,+GAAA,CAAA,eAAY;IAE9D,IAAI,OAAO;QACT,OAAO,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,OAAO;IAClD;IACA,OAAO;AACT,GACA,CAAC;IACC,QAAQ,MAAM,CAAC;AACjB;AAGF,IAAI,YAAY,CAAC,QAAQ,CAAC,GAAG,CAC3B,CAAC,WAA4B,UAC7B,OAAO;IACL,MAAM,kBAAkB,MAAM,MAAM;IAEpC,IAAI,MAAM,QAAQ,EAAE,UAAU,OAAO,CAAC,gBAAgB,MAAM,EAAE;QAC5D,gBAAgB,MAAM,GAAG;QAEzB,MAAM,eAA8B,aAAa,OAAO,CAAC,+GAAA,CAAA,gBAAa;QACtE,IAAI,cAAc;YAChB,IAAI;gBACF,MAAM,MAAM,MAAM,qIAAA,CAAA,UAAK,CAAC,IAAI,CAC1B,GAAG,QAAQ,GAAG,CAAC,GAAG,CAAC,mBAAmB,CAAC,EAAE;oBAAE,SAAS;gBAAa;gBAEnE,IAAI,IAAI,MAAM,KAAK,KAAK;oBACtB,MAAM,iBAAiB,IAAI,IAAI,CAAC,MAAM;oBACtC,aAAa,OAAO,CAAC,+GAAA,CAAA,eAAY,EAAE;oBAEnC,IAAI,gBAAgB,OAAO,EAAE;wBAC3B,gBAAgB,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,gBAAgB;oBACpE;oBACA,OAAO,IAAI;gBACb;YACF,EACA,OAAO,cAAc;gBACnB,QAAQ,KAAK,CAAC,yBAAyB;gBAEvC,aAAa,UAAU,CAAC,+GAAA,CAAA,eAAY;gBACpC,aAAa,UAAU,CAAC,+GAAA,CAAA,gBAAa;gBACrC,OAAO,QAAQ,CAAC,IAAI,GAAG;YACzB;QACF,OAAO;YACL,QAAQ,IAAI,CAAC;YACb,aAAa,UAAU,CAAC,+GAAA,CAAA,eAAY;YACpC,aAAa,UAAU,CAAC,+GAAA,CAAA,gBAAa;YACrC,OAAO,QAAQ,CAAC,IAAI,GAAG;QACzB;IACF;IACA,OAAO,QAAQ,MAAM,CAAC;AACxB;uCAGa"}},
    {"offset": {"line": 200, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 206, "column": 0}, "map": {"version":3,"sources":["file:///home/pavan-kumar/pavan/dummy/front-end/components/ProtectedRoute.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\n\nimport { useEffect, useState } from \"react\"\nimport { useRouter } from \"next/navigation\"\nimport { ACCESS_TOKEN, REFRESH_TOKEN } from \"@/lib/constant\"\nimport { jwtDecode } from \"jwt-decode\"\nimport api from \"@/lib/api\"\n\nconst ProtectedRoute = ({ children }: { children: React.ReactNode }) => {\n  const [isAuthorized, setIsAuthorized] = useState(false)\n  const [isLoading, setIsLoading] = useState(true)\n  const router = useRouter()\n\n  useEffect(() => {\n    const checkAuth = async () => {\n      try {\n        await auth()\n      } catch (error) {\n        setIsAuthorized(false)\n        setIsLoading(false)\n      }\n    }\n    checkAuth()\n  }, [])\n\n  const refresh = async () => {\n    const refreshToken = localStorage.getItem(REFRESH_TOKEN)\n\n    try {\n      const res = await api.post(\"auth/token/refresh\", { refresh: refreshToken })\n\n      if (res.status === 200) {\n        setIsAuthorized(true)\n        localStorage.setItem(ACCESS_TOKEN, res.data.access)\n      } else {\n        setIsAuthorized(false)\n      }\n    } catch (error) {\n      console.log(\"Error in Refreshing Token\", error)\n      setIsAuthorized(false)\n    }\n    setIsLoading(false)\n  }\n\n  const auth = async () => {\n    const token = localStorage.getItem(ACCESS_TOKEN)\n\n    if (!token) {\n      setIsAuthorized(false)\n      setIsLoading(false)\n      return\n    }\n\n    try {\n      const decode = jwtDecode(token)\n      const tokenExpiration: number = (decode as any).exp\n      const now = Date.now() / 1000\n\n      if (tokenExpiration < now) {\n        await refresh()\n      } else {\n        setIsAuthorized(true)\n        setIsLoading(false)\n      }\n    } catch (error) {\n      console.log(\"Error in Decoding\", error)\n      setIsAuthorized(false)\n      setIsLoading(false)\n    }\n  }\n\n  if (isLoading) {\n    return <div className=\"flex justify-center items-center min-h-screen\">Loading...</div>\n  }\n\n  if (!isAuthorized) {\n    router.push(\"/auth/login\")\n    return null\n  }\n\n  return children\n}\n\nexport default ProtectedRoute"],"names":[],"mappings":";;;;AAIA;AACA;AACA;AACA;AACA;AARA;;;;;;;AAUA,MAAM,iBAAiB,CAAC,EAAE,QAAQ,EAAiC;IACjE,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACjD,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC3C,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IAEvB,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,YAAY;YAChB,IAAI;gBACF,MAAM;YACR,EAAE,OAAO,OAAO;gBACd,gBAAgB;gBAChB,aAAa;YACf;QACF;QACA;IACF,GAAG,EAAE;IAEL,MAAM,UAAU;QACd,MAAM,eAAe,aAAa,OAAO,CAAC,+GAAA,CAAA,gBAAa;QAEvD,IAAI;YACF,MAAM,MAAM,MAAM,0GAAA,CAAA,UAAG,CAAC,IAAI,CAAC,sBAAsB;gBAAE,SAAS;YAAa;YAEzE,IAAI,IAAI,MAAM,KAAK,KAAK;gBACtB,gBAAgB;gBAChB,aAAa,OAAO,CAAC,+GAAA,CAAA,eAAY,EAAE,IAAI,IAAI,CAAC,MAAM;YACpD,OAAO;gBACL,gBAAgB;YAClB;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,GAAG,CAAC,6BAA6B;YACzC,gBAAgB;QAClB;QACA,aAAa;IACf;IAEA,MAAM,OAAO;QACX,MAAM,QAAQ,aAAa,OAAO,CAAC,+GAAA,CAAA,eAAY;QAE/C,IAAI,CAAC,OAAO;YACV,gBAAgB;YAChB,aAAa;YACb;QACF;QAEA,IAAI;YACF,MAAM,SAAS,CAAA,GAAA,sJAAA,CAAA,YAAS,AAAD,EAAE;YACzB,MAAM,kBAA0B,AAAC,OAAe,GAAG;YACnD,MAAM,MAAM,KAAK,GAAG,KAAK;YAEzB,IAAI,kBAAkB,KAAK;gBACzB,MAAM;YACR,OAAO;gBACL,gBAAgB;gBAChB,aAAa;YACf;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,GAAG,CAAC,qBAAqB;YACjC,gBAAgB;YAChB,aAAa;QACf;IACF;IAEA,IAAI,WAAW;QACb,qBAAO,8OAAC;YAAI,WAAU;sBAAgD;;;;;;IACxE;IAEA,IAAI,CAAC,cAAc;QACjB,OAAO,IAAI,CAAC;QACZ,OAAO;IACT;IAEA,OAAO;AACT;uCAEe"}},
    {"offset": {"line": 295, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}